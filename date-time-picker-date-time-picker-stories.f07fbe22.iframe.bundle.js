(self.webpackChunk=self.webpackChunk||[]).push([[886],{"./projects/story-book/src/date-time-picker/date-time-picker.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CustomDateAdapter:()=>CustomDateAdapter,__namedExportsOrder:()=>__namedExportsOrder,default:()=>date_time_picker_stories,standard:()=>standard});var common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),fr_CH=__webpack_require__("./node_modules/@angular/common/locales/extra/fr-CH.mjs"),locales_fr_CH=__webpack_require__("./node_modules/@angular/common/locales/fr-CH.mjs"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),core=__webpack_require__("./node_modules/@angular/material/fesm2022/core.mjs"),datepicker=__webpack_require__("./node_modules/@angular/material/fesm2022/datepicker.mjs"),form_field=__webpack_require__("./node_modules/@angular/material/fesm2022/form-field.mjs"),icon=__webpack_require__("./node_modules/@angular/material/fesm2022/icon.mjs"),input=__webpack_require__("./node_modules/@angular/material/fesm2022/input.mjs"),animations=__webpack_require__("./node_modules/@angular/platform-browser/fesm2022/animations.mjs"),dist=__webpack_require__("./node_modules/@storybook/angular/dist/index.mjs"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var datepicker_with_time_componentngResource=__webpack_require__("./projects/date-picker/src/datepicker-with-time/datepicker-with-time.component.scss?ngResource"),datepicker_with_time_componentngResource_default=__webpack_require__.n(datepicker_with_time_componentngResource),portal=__webpack_require__("./node_modules/@angular/cdk/fesm2022/portal.mjs"),fesm2022_core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),rxjs_interop=__webpack_require__("./node_modules/@angular/core/fesm2022/rxjs-interop.mjs"),fesm2022_button=__webpack_require__("./node_modules/@angular/material/fesm2022/button.mjs"),time_picker_componentngResource=__webpack_require__("./projects/time-picker/src/time-picker.component.scss?ngResource"),time_picker_componentngResource_default=__webpack_require__.n(time_picker_componentngResource);var coercion=__webpack_require__("./node_modules/@angular/cdk/fesm2022/coercion.mjs"),numeric_stepper_component=__webpack_require__("./projects/numeric-stepper/src/numeric-stepper.component.ts"),set=__webpack_require__("./node_modules/date-fns/esm/set/index.js"),isSameHour=__webpack_require__("./node_modules/date-fns/esm/isSameHour/index.js"),Subject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subject.js"),debounce=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/debounce.js"),timer=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/timer.js"),distinctUntilChanged=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js"),map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js");let NgxTimePickerComponent=class NgxTimePickerComponent{hours;minutes;timeChange=new fesm2022_core.EventEmitter;mode="fullTime";dataType="date";forceNullValue=!1;appearance="outline";set autoFocus(value){this._autoFocus=(0,coercion.he)(value)}defaultPlaceholderHours="_ _";defaultPlaceholderMinutes="_ _";set time(value){this.writeValue(value)}get time(){return this.value}set step(value){this._step=(0,coercion.OE)(value),this.changeDetectorRef.markForCheck()}get step(){return this._step}set disabled(value){this._disabled=(0,coercion.he)(value),this.changeDetectorRef.markForCheck()}get disabled(){return this._disabled}onHoursChange$=new Subject.B;onMinutesChange$=new Subject.B;_step=1;changeDetectorRef=(0,fesm2022_core.inject)(fesm2022_core.ChangeDetectorRef);control=(0,fesm2022_core.inject)(fesm2022_forms.vO,{optional:!0,self:!0});destroyRef=(0,fesm2022_core.inject)(fesm2022_core.DestroyRef);_disabled=!1;_value;_autoFocus=!0;constructor(){this.control&&(this.control.valueAccessor=this),this.onHoursChange$.pipe((0,debounce.s)((hours=>(0,timer.O)("object"==typeof hours?0:10))),(0,distinctUntilChanged.F)(),(0,map.T)((hours=>{if("object"==typeof hours){const value=hours.target.value;return[void 0!==value?parseInt(value,10):void 0,!0]}return[isNaN(hours)?0:hours,!1]})),(0,rxjs_interop.pQ)(this.destroyRef)).subscribe((([hours,isEvent])=>{if(this.value)if(this.value instanceof Date){const value=this.value?.getTime(),clone=new Date(value);void 0!==hours&&clone.setHours(hours),this.value=clone}else this.value={hours:hours&&hours<0?0:hours,minutes:this.value.minutes};else this.value="date"===this.dataType?(0,set.A)(new Date,{hours,minutes:0,seconds:0,milliseconds:0}):{hours,minutes:0};this.changeDetectorRef.markForCheck(),isEvent&&this._autoFocus&&this.minutes&&(this.minutes.nativeElement.focus({preventScroll:!0}),this.minutes.nativeElement.select())})),this.onMinutesChange$.pipe((0,debounce.s)((minutes=>(0,timer.O)("object"==typeof minutes?0:10))),(0,distinctUntilChanged.F)(),(0,map.T)((event=>{let minutes;if("object"==typeof event){const value=event.target.value;minutes=void 0!==value?parseInt(value,10):void 0}else minutes=event;return minutes&&!isNaN(minutes)&&minutes||0})),(0,rxjs_interop.pQ)(this.destroyRef)).subscribe((minutes=>{if(this.value)if(this.value instanceof Date){const newValue=new Date(this.value.getTime());minutes<0?minutes+=60:minutes>=60&&(minutes-=60),newValue.setMinutes(minutes),("fullTimeWithHoursDisabled"!==this.mode||"fullTimeWithHoursDisabled"===this.mode&&(0,isSameHour.A)(this.value,newValue))&&(this.value=newValue)}else this.value={hours:this.value.hours,minutes:minutes<0||minutes>=60?0:minutes};else this.value="date"===this.dataType?(0,set.A)(new Date,{hours:0,minutes,seconds:0,milliseconds:0}):{hours:0,minutes};this.changeDetectorRef.markForCheck()}))}onKeyDown($event,mode){const inputElement="hours"===mode?this.hours?.nativeElement:this.minutes?.nativeElement;if("d"===$event.key?.toLowerCase())$event.stopPropagation(),$event.preventDefault(),this.value=new Date;else if(inputElement)if("a"===$event.key?.toLowerCase()&&$event.ctrlKey)inputElement.select();else if($event.key&&!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Backspace","Delete","Tab","Enter","Control","Shift"].includes($event.key)){let regex;regex="hours"===mode?"date"===this.dataType?/^(\d|[01]\d|2[0-3])$/:/^(\d+)$/:/^(\d|[0-5]\d)$/;const[selectionStart,selectionEnd]=[inputElement.selectionStart||0,inputElement.selectionEnd||0].sort(((a,b)=>a-b)),selectionDiff=selectionEnd-selectionStart,inputValue=inputElement.value||"",inputValueArr=Array.from(inputValue);inputValueArr.splice(selectionStart,selectionDiff,$event.key);const newInputValue=inputValueArr.join("");regex.test(newInputValue)?this._autoFocus&&"hours"===mode&&("date"===this.dataType&&parseFloat(newInputValue)>=3||2===newInputValue.length)&&this.onHoursChange$.next($event):($event.stopPropagation(),$event.preventDefault())}}get hoursValue(){if(!(!this.value||this.forceNullValue&&"fullTimeWithMinutesDisabled"===this.mode&&this.control?.pristine))return this.value instanceof Date?this.value.getHours():this.value.hours}get minutesValue(){if(!(!this.value||this.forceNullValue&&"fullTimeWithHoursDisabled"===this.mode&&this.control?.pristine))return this.value instanceof Date?this.value.getMinutes():this.value.minutes}incrementValue(fieldType){"hours"===fieldType?this.onHoursChange$.next((this.hoursValue||0)+1):this.onMinutesChange$.next((this.minutesValue||0)+this._step)}decrementValue(fieldType){"hours"===fieldType?this.onHoursChange$.next((this.hoursValue||0)-1):this.onMinutesChange$.next((this.minutesValue||0)-this._step)}onClick(mode){this._autoFocus&&("hours"===mode?this.hours?.nativeElement.select():this.minutes?.nativeElement.select())}set value(v){v!==this._value&&(this.writeValue(v),this.onChangeCallback(v),this.timeChange.emit(v))}get value(){return this._value}writeValue(value){(value??null)!==(this._value??null)&&(value instanceof Date?this._value=value?new Date(value.getTime()):(0,set.A)(new Date,{hours:0,minutes:0,seconds:0}):this._value=value,this.changeDetectorRef.markForCheck())}registerOnChange(fn){this.onChangeCallback=fn}registerOnTouched(fn){this.onTouchedCallback=fn}setDisabledState(isDisabled){this.disabled=isDisabled}onChangeCallback=_a=>{};onTouchedCallback=()=>{};static ctorParameters=()=>[];static propDecorators={hours:[{type:fesm2022_core.ViewChild,args:["hours"]}],minutes:[{type:fesm2022_core.ViewChild,args:["minutes"]}],timeChange:[{type:fesm2022_core.Output}],mode:[{type:fesm2022_core.Input}],dataType:[{type:fesm2022_core.Input}],forceNullValue:[{type:fesm2022_core.Input}],appearance:[{type:fesm2022_core.Input}],autoFocus:[{type:fesm2022_core.Input}],defaultPlaceholderHours:[{type:fesm2022_core.Input}],defaultPlaceholderMinutes:[{type:fesm2022_core.Input}],time:[{type:fesm2022_core.Input}],step:[{type:fesm2022_core.Input}],disabled:[{type:fesm2022_core.Input}]}};NgxTimePickerComponent=(0,tslib_es6.Cg)([(0,fesm2022_core.Component)({changeDetection:fesm2022_core.ChangeDetectionStrategy.OnPush,selector:"ngx-time-picker",template:'\x3c!-- Hours --\x3e\n<mat-form-field\n    [appearance]="appearance"\n    class="hours"\n    [class.disabled]="disabled || mode === \'fullTimeWithHoursDisabled\'"\n    [style.display]="mode === \'minutesOnly\' ? \'none\' : \'block\'">\n    <input\n        #hours\n        matInput\n        type="text"\n        [ngModel]="hoursValue | number: \'2.\'"\n        (change)="onHoursChange$.next($event)"\n        (keydown)="onKeyDown($event, \'hours\')"\n        [disabled]="disabled || mode === \'fullTimeWithHoursDisabled\'"\n        [maxLength]="2"\n        autocomplete="off"\n        [placeholder]="defaultPlaceholderHours"\n        (click)="onClick(\'hours\')" />\n    <ngx-numeric-stepper\n        (increment)="incrementValue(\'hours\')"\n        (decrement)="decrementValue(\'hours\')"></ngx-numeric-stepper>\n</mat-form-field>\n\n\x3c!-- Separator --\x3e\n<span class="time-separator" [style.display]="mode === \'minutesOnly\' || mode === \'hoursOnly\' ? \'none\' : \'block\'">\n    :\n</span>\n\n\x3c!-- Minutes --\x3e\n<mat-form-field\n    [appearance]="appearance"\n    class="minutes"\n    [class.disabled]="disabled || mode === \'fullTimeWithMinutesDisabled\'"\n    [style.display]="mode === \'hoursOnly\' ? \'none\' : \'block\'">\n    <input\n        #minutes\n        matInput\n        type="text"\n        [ngModel]="minutesValue | number: \'2.\'"\n        (change)="onMinutesChange$.next($event)"\n        (keydown)="onKeyDown($event, \'minutes\')"\n        [disabled]="disabled || mode === \'fullTimeWithMinutesDisabled\'"\n        [maxLength]="2"\n        autocomplete="off"\n        [placeholder]="defaultPlaceholderMinutes"\n        (click)="onClick(\'minutes\')" />\n    <ngx-numeric-stepper\n        (increment)="incrementValue(\'minutes\')"\n        (decrement)="decrementValue(\'minutes\')"></ngx-numeric-stepper>\n</mat-form-field>\n',encapsulation:fesm2022_core.ViewEncapsulation.None,standalone:!0,imports:[common.DecimalPipe,fesm2022_forms.YN,form_field.rl,input.fg,numeric_stepper_component.Z],styles:[time_picker_componentngResource_default()]})],NgxTimePickerComponent);var cloneDeep=__webpack_require__("./node_modules/lodash-es/cloneDeep.js"),tap=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/tap.js"),delay=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/delay.js"),filter=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/filter.js");const DATE_TIME_ADAPTER=new fesm2022_core.InjectionToken("DATE_TIME_ADAPTER");let NgxDatepickerWithTimeComponent=class NgxDatepickerWithTimeComponent{template;timePickerElement;time;datepicker=(0,fesm2022_core.inject)(datepicker.Vh);viewContainerRef=(0,fesm2022_core.inject)(fesm2022_core.ViewContainerRef);globalModel=(0,fesm2022_core.inject)(datepicker.QW);dateAdapter=(0,fesm2022_core.inject)(DATE_TIME_ADAPTER,{optional:!0});destroyRef=(0,fesm2022_core.inject)(fesm2022_core.DestroyRef);portal;constructor(){this.datepicker.openedStream.pipe((0,tap.M)((()=>{const datePickerInput=this.datepicker.datepickerInput;this.time=datePickerInput.value??new Date})),(0,delay.c)(1),(0,map.T)((()=>this.timePickerElement?.nativeElement.parentElement)),(0,filter.p)(Boolean),(0,rxjs_interop.pQ)(this.destroyRef)).subscribe((datePickerContainer=>{const containerRef=this.viewContainerRef.element.nativeElement;datePickerContainer.setAttribute("layout",containerRef?.ownerDocument?.body?.clientHeight<=500?"h":"v")}))}onDateTimeClosed(){let date=(0,cloneDeep.A)(this.globalModel.selection)||new Date;if(this.time){let hours,minutes,seconds;this.time instanceof Date?(hours=this.time.getHours(),minutes=this.time.getMinutes(),seconds=this.time.getSeconds()):(hours=this.time.hours||0,minutes=this.time.minutes||0,seconds=this.time.seconds||0),date instanceof Date?date.setHours(hours,minutes,seconds):this.dateAdapter&&(date=this.dateAdapter.setTime(date,hours,minutes,seconds))}this.globalModel.updateSelection(date,this);this.datepicker.datepickerInput.writeValue(date)}ngAfterViewInit(){this.template&&(this.portal=new portal.VA(this.template,this.viewContainerRef),this.datepicker.registerActions(this.portal))}ngOnDestroy(){this.portal&&(this.datepicker.removeActions(this.portal),this.portal.isAttached&&this.portal.detach())}static ctorParameters=()=>[];static propDecorators={template:[{type:fesm2022_core.ViewChild,args:[fesm2022_core.TemplateRef]}],timePickerElement:[{type:fesm2022_core.ViewChild,args:[NgxTimePickerComponent,{read:fesm2022_core.ElementRef,static:!1}]}]}};NgxDatepickerWithTimeComponent=(0,tslib_es6.Cg)([(0,fesm2022_core.Component)({selector:"ngx-datepicker-with-time",template:'<ng-template>\n    <ngx-time-picker #timepicker class="ngx-datepicker-with-time" [(time)]="time"></ngx-time-picker>\n    <div class="ngx-datepicker-with-time action-buttons">\n        <button mat-raised-button color="primary" matDatepickerApply (click)="onDateTimeClosed()">OK</button>\n    </div>\n</ng-template>\n',changeDetection:fesm2022_core.ChangeDetectionStrategy.OnPush,encapsulation:fesm2022_core.ViewEncapsulation.None,standalone:!0,imports:[fesm2022_button.$z,NgxTimePickerComponent,datepicker.Vh,datepicker.T7],styles:[datepicker_with_time_componentngResource_default()]})],NgxDatepickerWithTimeComponent),(0,common.registerLocaleData)(locales_fr_CH.A,"fr-CH",fr_CH.A);class CustomDateAdapter extends core.xW{format(date,_displayFormat){return`${date.getMonth()+1}-${date.getDate()}-${date.getFullYear()} ${date.getHours()}:${date.getMinutes()}`}}const date_time_picker_stories={title:"Components/DateTimePicker",component:NgxDatepickerWithTimeComponent,tags:["autodocs"],decorators:[(0,dist.moduleMetadata)({imports:[fesm2022_forms.YN,animations.NoopAnimationsModule,datepicker.X6,icon.m_,input.fS,form_field.RG,numeric_stepper_component.Z],providers:[{provide:core.MJ,useClass:CustomDateAdapter},{provide:core.de,useValue:core.Xz}]})],parameters:{layout:"centered",docs:{description:{component:"The `NgxDatepickerWithTimeComponent` utilizes `MatDatepicker` and `NgxNumericStepper` to extend the classic DatePicker with TimePicker functionality.<br /><b>Note:</b> The Angular `NativeDateAdapter` does not support time format. You must use Moment, DateFns, or a custom date adapter to enable this feature."}}}},standard={render:args=>({props:{...args,value:new Date,appearance:"outline"},template:'\n            <mat-form-field [appearance]="appearance">\n                <mat-label>DatetimePicker</mat-label>\n                <input matInput [(ngModel)]="value" [matDatepicker]="picker" />\n                <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>\n                <mat-datepicker #picker>\n                    <ngx-datepicker-with-time></ngx-datepicker-with-time>\n                </mat-datepicker>\n            </mat-form-field>\n          '})},__namedExportsOrder=["CustomDateAdapter","standard"];standard.parameters={...standard.parameters,docs:{...standard.parameters?.docs,source:{originalSource:'{\n  render: args => ({\n    props: {\n      ...args,\n      value: new Date(),\n      appearance: \'outline\'\n    },\n    template: `\n            <mat-form-field [appearance]="appearance">\n                <mat-label>DatetimePicker</mat-label>\n                <input matInput [(ngModel)]="value" [matDatepicker]="picker" />\n                <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>\n                <mat-datepicker #picker>\n                    <ngx-datepicker-with-time></ngx-datepicker-with-time>\n                </mat-datepicker>\n            </mat-form-field>\n          `\n  })\n}',...standard.parameters?.docs?.source}}}},"./projects/date-picker/src/datepicker-with-time/datepicker-with-time.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"ngx-time-picker.ngx-datepicker-with-time .time-range {\n  display: flex;\n  align-items: center;\n}\nngx-time-picker.ngx-datepicker-with-time .time-range .ngx-time-picker-separator {\n  text-align: center;\n  margin: 0 0.5rem;\n}\n\n.ngx-datepicker-with-time.action-buttons {\n  padding: 1.5rem 0 1rem 0;\n  display: flex;\n  justify-content: center;\n}\n\n.mat-datepicker-content-container[layout=h] {\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: space-evenly;\n}\n.mat-datepicker-content-container[layout=h] .mat-calendar {\n  height: auto;\n}\n.mat-datepicker-content-container[layout=h] .mat-calendar .mat-calendar-header {\n  padding: 0 8px 0 8px;\n}\n.mat-datepicker-content-container[layout=h] .mat-calendar,\n.mat-datepicker-content-container[layout=h] ngx-time-picker.ngx-datepicker-with-time {\n  flex: 0 0 auto;\n}\n.mat-datepicker-content-container[layout=h] .ngx-datepicker-with-time.action-buttons {\n  flex: 1 0 100%;\n  padding: 0 0 1rem 0;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./projects/time-picker/src/time-picker.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"ngx-time-picker {\n  display: flex;\n  flex-direction: row;\n  align-items: baseline;\n  justify-content: center;\n}\nngx-time-picker:not([inform]) .mat-form-field-appearance-outline .mat-mdc-form-field-wrapper {\n  padding-bottom: 0;\n}\nngx-time-picker:not([inform]) .mat-form-field-appearance-outline .mat-mdc-form-field-wrapper .mat-mdc-form-field-infix {\n  border-bottom: 0.7em solid transparent;\n}\nngx-time-picker mat-form-field[ngx-numeric-stepper-form-field] {\n  width: 52px;\n}\nngx-time-picker .time-separator {\n  width: 4px;\n  font-size: 14.5px;\n  line-height: 17px;\n  margin: 0 8px;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()}}]);